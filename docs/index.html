<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Regression-Based Causal Mediation Analysis • regmedint</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Regression-Based Causal Mediation Analysis">
<meta property="og:description" content="R implementation of regression-based causal mediation analysis with standard errors via the delta method.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">regmedint</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/01_introduction.html">Introduction to user interface functions</a>
    </li>
    <li>
      <a href="articles/02_formulas.html">Implementation of formulas</a>
    </li>
    <li>
      <a href="articles/03_bootstrap.html">Using bootstrapping with regemedint</a>
    </li>
    <li>
      <a href="articles/04_mi.html">Using multiple imputation with regmedint</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kaz-yos/regmedint">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="regmedint" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#regmedint" class="anchor"></a>regmedint <img src="reference/figures/hex.png" align="right" height="140">
</h1></div>

<p>This is an R re-implementation of the regression-based causal mediation analysis methods as implemented in the SAS macro by Valeri and VanderWeele (2013 and 2015). The original is found at Dr. VanderWeele’s <a href="https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/">Tools and Tutorials</a>.</p>
<p>This package is meant to be an educational tool. Thanks to R’s expressibility, the code is likely easier to read than SAS IML. Thus, the correspondence between the mathematical formulas presented in the Appendix of Explanation in Causal Inference (V2015) and the code should be easier to grasp. See the vignette (Article on the package website) for the code that implements formulas.</p>
</div>
<div id="implemented-models" class="section level1">
<h1 class="hasAnchor">
<a href="#implemented-models" class="anchor"></a>Implemented models</h1>
<p>This package is currently under development and is not on CRAN, yet. Following VV2015, the following grid of models are implemented. yreg refers to the outcome model and mreg refers to the mediator model. See the <a href="https://github.com/kaz-yos/regmedint/tree/master/tests/reference_results">Github repo</a> for cross-check results against the SAS macro.</p>
<table class="table">
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
yreg \ mreg
</th>
<th style="text-align: center;">
linear
</th>
<th style="text-align: center;">
logistic
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
linear
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
logistic (1)
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
loglinear
</td>
<td style="text-align: center;">
implemented (2)
</td>
<td style="text-align: center;">
implemented (2)
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
poisson
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
negbin
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
survCox (1)
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
survAFT exp
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
survAFT weibull
</td>
<td style="text-align: center;">
implemented
</td>
<td style="text-align: center;">
implemented
</td>
</tr>
</tbody>
</table>
<ol>
<li><p>Approximation depends on the rare event assumptions.</p></li>
<li><p>As oppose to the SAS macro, the outcome model is implemented as a modified Poisson model (log link with robust variance) as in Z2004.</p></li>
</ol>
<p>See the corresponding vignettes (Articles on the package website) for how to perform bootstrapping and multiple imputation.</p>

<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>For the developmental version on Github, use the following commands to install the package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">install.packages</span>(<span class="st">"devtools"</span>) <span class="co"># If you do not have devtools already.</span></a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"kaz-yos/regmedint"</span>)</a></code></pre></div>
<p>Once released on CRAN, the following should install the stable version.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">install.packages</span>(<span class="st">"regmedint"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level1">
<h1 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h1>
<p>Here we will analyze the simulated example that is included with the SAS macro. See the introduction vignette (Article on the package website) for details of the user interface functions.</p>
<div id="regmedint-to-fit-models" class="section level2">
<h2 class="hasAnchor">
<a href="#regmedint-to-fit-models" class="anchor"></a><code>regmedint()</code> to fit models</h2>
<p>The <code>regmedint</code> function is the user interface for constructing a result object of class <code>regmedint</code>. The interface is made similar to the original SAS macro. For survival outcomes, the indicator variable is an event indicator (1 for event, 0 for censoring). The <code>c_cond</code> vector is required. This vector is the vector of covariate values at which the conditional effects are evaluated at.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">library</span>(regmedint)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">vv2015 &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="dt">file =</span> <span class="st">"./tests/reference_results/data-valeri-vanderweele-2015.txt"</span>,</a>
<a class="sourceLine" id="cb3-5" title="5">                     <span class="dt">delim =</span> <span class="st">" "</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="st">    </span><span class="co">## Following R convention, an event indicator is used.</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">event =</span> <span class="kw">if_else</span>(cens <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, 1L, 0L))</a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9">regmedint_obj &lt;-<span class="st"> </span><span class="kw">regmedint</span>(<span class="dt">data =</span> vv2015,</a>
<a class="sourceLine" id="cb3-10" title="10">                           <span class="co">## Variables</span></a>
<a class="sourceLine" id="cb3-11" title="11">                           <span class="dt">yvar =</span> <span class="st">"y"</span>,</a>
<a class="sourceLine" id="cb3-12" title="12">                           <span class="dt">avar =</span> <span class="st">"x"</span>,</a>
<a class="sourceLine" id="cb3-13" title="13">                           <span class="dt">mvar =</span> <span class="st">"m"</span>,</a>
<a class="sourceLine" id="cb3-14" title="14">                           <span class="dt">cvar =</span> <span class="kw">c</span>(<span class="st">"c"</span>),</a>
<a class="sourceLine" id="cb3-15" title="15">                           <span class="dt">eventvar =</span> <span class="st">"event"</span>,</a>
<a class="sourceLine" id="cb3-16" title="16">                           <span class="co">## Values at which effects are evaluated</span></a>
<a class="sourceLine" id="cb3-17" title="17">                           <span class="dt">a0 =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb3-18" title="18">                           <span class="dt">a1 =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb3-19" title="19">                           <span class="dt">m_cde =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb3-20" title="20">                           <span class="dt">c_cond =</span> <span class="fl">0.5</span>,</a>
<a class="sourceLine" id="cb3-21" title="21">                           <span class="co">## Model types</span></a>
<a class="sourceLine" id="cb3-22" title="22">                           <span class="dt">mreg =</span> <span class="st">"logistic"</span>,</a>
<a class="sourceLine" id="cb3-23" title="23">                           <span class="dt">yreg =</span> <span class="st">"survAFT_weibull"</span>,</a>
<a class="sourceLine" id="cb3-24" title="24">                           <span class="co">## Additional specification</span></a>
<a class="sourceLine" id="cb3-25" title="25">                           <span class="dt">interaction =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-26" title="26">                           <span class="dt">casecontrol =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
</div>
<div id="print-to-examine-simplified-results" class="section level2">
<h2 class="hasAnchor">
<a href="#print-to-examine-simplified-results" class="anchor"></a><code>print()</code> to examine simplified results</h2>
<p>Implicit printing prints mreg, yreg, and mediation analysis point estimates. All effect estimates are on the scale of the link function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">regmedint_obj</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">## </span><span class="al">###</span><span class="co"> Mediator model</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">## Call:  glm(formula = m ~ x + c, family = binomial(link = "logit"), data = data)</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">## Coefficients:</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">## (Intercept)            x            c  </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">##     -0.3545       0.3842       0.2694  </span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">## Degrees of Freedom: 99 Total (i.e. Null);  97 Residual</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">## Null Deviance:       138.6 </span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">## Residual Deviance: 136.1     AIC: 142.1</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">## </span><span class="al">###</span><span class="co"> Outcome model</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">## Call:</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">## survival::survreg(formula = Surv(y, event) ~ x * m + c, data = data, </span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">##     dist = "weibull")</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">## Coefficients:</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">## (Intercept)           x           m           c         x:m </span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">## -1.04244118  0.44075656  0.09053705 -0.06689165  0.10031424 </span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">## Scale= 0.9658808 </span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">## Loglik(model)= -11.4   Loglik(intercept only)= -14.5</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">##  Chisq= 6.31 on 4 degrees of freedom, p= 0.177 </span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">## n= 100 </span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">## </span><span class="al">###</span><span class="co"> Mediation analysis </span></a>
<a class="sourceLine" id="cb4-29" title="29"><span class="co">##         cde        pnde        tnie        tnde        pnie          te          pm </span></a>
<a class="sourceLine" id="cb4-30" title="30"><span class="co">## 0.541070807 0.488930417 0.018240025 0.498503455 0.008666987 0.507170442 0.045436278</span></a></code></pre></div>
</div>
<div id="summary-to-examine-extended-results" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-to-examine-extended-results" class="anchor"></a><code>summary()</code> to examine extended results</h2>
<p>The <code>summary</code> method gives the summary for <code>mreg</code>, <code>yreg</code>, and mediation analysis results. The <code>exponentiate</code> option will add the exponentiated estimate and confidence limits if the outcome model is not a linear model. The pure natural direct effect (<code>pnde</code>) is what is typically called the natural direct effect (NDE). The total natural indirect effect (<code>tnie</code>) is the corresponding natural indirect effect (NIE).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">summary</span>(regmedint_obj, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">## </span><span class="al">###</span><span class="co"> Mediator model</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">## Call:</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">## glm(formula = m ~ x + c, family = binomial(link = "logit"), data = data)</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">## Deviance Residuals: </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">##     Min       1Q   Median       3Q      Max  </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">## -1.5143  -1.1765   0.9177   1.1133   1.4602  </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">## Coefficients:</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">##             Estimate Std. Error z value Pr(&gt;|z|)</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">## (Intercept)  -0.3545     0.3252  -1.090    0.276</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">## x             0.3842     0.4165   0.922    0.356</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">## c             0.2694     0.2058   1.309    0.191</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">## (Dispersion parameter for binomial family taken to be 1)</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">##     Null deviance: 138.59  on 99  degrees of freedom</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">## Residual deviance: 136.08  on 97  degrees of freedom</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">## AIC: 142.08</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">## Number of Fisher Scoring iterations: 4</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">## </span><span class="al">###</span><span class="co"> Outcome model</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">## Call:</span></a>
<a class="sourceLine" id="cb5-29" title="29"><span class="co">## survival::survreg(formula = Surv(y, event) ~ x * m + c, data = data, </span></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="co">##     dist = "weibull")</span></a>
<a class="sourceLine" id="cb5-31" title="31"><span class="co">##               Value Std. Error     z           p</span></a>
<a class="sourceLine" id="cb5-32" title="32"><span class="co">## (Intercept) -1.0424     0.1903 -5.48 0.000000043</span></a>
<a class="sourceLine" id="cb5-33" title="33"><span class="co">## x            0.4408     0.3008  1.47        0.14</span></a>
<a class="sourceLine" id="cb5-34" title="34"><span class="co">## m            0.0905     0.2683  0.34        0.74</span></a>
<a class="sourceLine" id="cb5-35" title="35"><span class="co">## c           -0.0669     0.0915 -0.73        0.46</span></a>
<a class="sourceLine" id="cb5-36" title="36"><span class="co">## x:m          0.1003     0.4207  0.24        0.81</span></a>
<a class="sourceLine" id="cb5-37" title="37"><span class="co">## Log(scale)  -0.0347     0.0810 -0.43        0.67</span></a>
<a class="sourceLine" id="cb5-38" title="38"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-39" title="39"><span class="co">## Scale= 0.966 </span></a>
<a class="sourceLine" id="cb5-40" title="40"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-41" title="41"><span class="co">## Weibull distribution</span></a>
<a class="sourceLine" id="cb5-42" title="42"><span class="co">## Loglik(model)= -11.4   Loglik(intercept only)= -14.5</span></a>
<a class="sourceLine" id="cb5-43" title="43"><span class="co">##  Chisq= 6.31 on 4 degrees of freedom, p= 0.18 </span></a>
<a class="sourceLine" id="cb5-44" title="44"><span class="co">## Number of Newton-Raphson Iterations: 5 </span></a>
<a class="sourceLine" id="cb5-45" title="45"><span class="co">## n= 100 </span></a>
<a class="sourceLine" id="cb5-46" title="46"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-47" title="47"><span class="co">## </span><span class="al">###</span><span class="co"> Mediation analysis </span></a>
<a class="sourceLine" id="cb5-48" title="48"><span class="co">##              est         se         Z           p       lower      upper exp(est) exp(lower) exp(upper)</span></a>
<a class="sourceLine" id="cb5-49" title="49"><span class="co">## cde  0.541070807 0.29422958 1.8389409 0.065923882 -0.03560858 1.11775019 1.717845  0.9650179   3.057967</span></a>
<a class="sourceLine" id="cb5-50" title="50"><span class="co">## pnde 0.488930417 0.21049248 2.3227928 0.020190284  0.07637274 0.90148809 1.630571  1.0793648   2.463266</span></a>
<a class="sourceLine" id="cb5-51" title="51"><span class="co">## tnie 0.018240025 0.03706111 0.4921608 0.622605663 -0.05439841 0.09087846 1.018407  0.9470547   1.095136</span></a>
<a class="sourceLine" id="cb5-52" title="52"><span class="co">## tnde 0.498503455 0.21209540 2.3503737 0.018754573  0.08280410 0.91420281 1.646256  1.0863290   2.494786</span></a>
<a class="sourceLine" id="cb5-53" title="53"><span class="co">## pnie 0.008666987 0.02730994 0.3173565 0.750973092 -0.04485951 0.06219348 1.008705  0.9561318   1.064168</span></a>
<a class="sourceLine" id="cb5-54" title="54"><span class="co">## te   0.507170442 0.21090051 2.4047853 0.016181972  0.09381303 0.92052785 1.660586  1.0983544   2.510615</span></a>
<a class="sourceLine" id="cb5-55" title="55"><span class="co">## pm   0.045436278 0.01725694 2.6329276 0.008465238  0.01161329 0.07925926       NA         NA         NA</span></a>
<a class="sourceLine" id="cb5-56" title="56"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-57" title="57"><span class="co">## Evaluated at:</span></a>
<a class="sourceLine" id="cb5-58" title="58"><span class="co">## avar: x</span></a>
<a class="sourceLine" id="cb5-59" title="59"><span class="co">##  a1 (intervened value of avar) = 1</span></a>
<a class="sourceLine" id="cb5-60" title="60"><span class="co">##  a0 (reference value of avar)  = 0</span></a>
<a class="sourceLine" id="cb5-61" title="61"><span class="co">## mvar: m</span></a>
<a class="sourceLine" id="cb5-62" title="62"><span class="co">##  m_cde (intervend value of mvar for cde) = 1</span></a>
<a class="sourceLine" id="cb5-63" title="63"><span class="co">## cvar: c</span></a>
<a class="sourceLine" id="cb5-64" title="64"><span class="co">##  c_cond (covariate vector value) = 0.5</span></a>
<a class="sourceLine" id="cb5-65" title="65"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-66" title="66"><span class="co">## Note that effect estimates can vary over m_cde and c_cond values when interaction = TRUE.</span></a></code></pre></div>
<p>Use <code>coef</code> to extract the mediation analysis results only.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">coef</span>(<span class="kw">summary</span>(regmedint_obj, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">##              est         se         Z           p       lower      upper exp(est) exp(lower) exp(upper)</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">## cde  0.541070807 0.29422958 1.8389409 0.065923882 -0.03560858 1.11775019 1.717845  0.9650179   3.057967</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">## pnde 0.488930417 0.21049248 2.3227928 0.020190284  0.07637274 0.90148809 1.630571  1.0793648   2.463266</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">## tnie 0.018240025 0.03706111 0.4921608 0.622605663 -0.05439841 0.09087846 1.018407  0.9470547   1.095136</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">## tnde 0.498503455 0.21209540 2.3503737 0.018754573  0.08280410 0.91420281 1.646256  1.0863290   2.494786</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">## pnie 0.008666987 0.02730994 0.3173565 0.750973092 -0.04485951 0.06219348 1.008705  0.9561318   1.064168</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">## te   0.507170442 0.21090051 2.4047853 0.016181972  0.09381303 0.92052785 1.660586  1.0983544   2.510615</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">## pm   0.045436278 0.01725694 2.6329276 0.008465238  0.01161329 0.07925926       NA         NA         NA</span></a></code></pre></div>
<p>Note that the estimates can be re-evaluated at different <code>m_cde</code> and <code>c_cond</code> without re-fitting the underlyng models.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">coef</span>(<span class="kw">summary</span>(regmedint_obj, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>, <span class="dt">m_cde =</span> <span class="dv">0</span>, <span class="dt">c_cond =</span> <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">##              est         se         Z          p        lower      upper exp(est) exp(lower) exp(upper)</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">## cde  0.440756562 0.30083077 1.4651313 0.14288511 -0.148860903 1.03037403 1.553882  0.8616890   2.802114</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">## pnde 0.516631282 0.23499226 2.1985034 0.02791325  0.056054918 0.97720765 1.676371  1.0576558   2.657027</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">## tnie 0.012479419 0.02489241 0.5013344 0.61613580 -0.036308799 0.06126764 1.012558  0.9643425   1.063183</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">## tnde 0.523024107 0.24782597 2.1104492 0.03481969  0.037294136 1.00875408 1.687122  1.0379983   2.742182</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">## pnie 0.006086594 0.01889371 0.3221493 0.74733960 -0.030944391 0.04311758 1.006105  0.9695295   1.044061</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">## te   0.529110701 0.24194191 2.1869328 0.02874743  0.054913270 1.00330813 1.697422  1.0564490   2.727289</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">## pm   0.030184325 0.01276593 2.3644440 0.01805716  0.005163563 0.05520509       NA         NA         NA</span></a></code></pre></div>
</div>
</div>
<div id="formulas" class="section level1">
<h1 class="hasAnchor">
<a href="#formulas" class="anchor"></a>Formulas</h1>
<p>The point estimate and standard error formulas (multivariate delta method) were taken from the following references. See <a href="https://github.com/kaz-yos/regmedint-supplement/blob/master/supplement.pdf" class="uri">https://github.com/kaz-yos/regmedint-supplement/blob/master/supplement.pdf</a> for type-set formulas.</p>
<ul>
<li>V2015: VanderWeele (2015) Explanation in Causal Inference.</li>
<li>VV2013A: Valeri &amp; VanderWeele (2013) Appendix</li>
<li>VV2015A: Valeri &amp; VanderWeele (2015) Appendix</li>
</ul>
<p>As seen below, there are only four patterns.</p>
<div id="effect-formulas" class="section level2">
<h2 class="hasAnchor">
<a href="#effect-formulas" class="anchor"></a>Effect formulas</h2>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 40%">
<col style="width: 40%">
</colgroup>
<thead><tr class="header">
<th>
yreg \ mreg
</th>
<th>
linear
</th>
<th>
logistic
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
linear
</td>
<td>
V2015 p466 Proposition 2.3
</td>
<td>
V2015 p471 Proposition 2.5
</td>
</tr>
<tr class="even">
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr class="odd">
<td>
logistic
</td>
<td>
V2015 p468 Proposition 2.4
</td>
<td>
V2015 p473 Proposition 2.6
</td>
</tr>
<tr class="even">
<td>
loglinear
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="odd">
<td>
poisson
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="even">
<td>
negbin
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="odd">
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr class="even">
<td>
survCox
</td>
<td>
V2015 p496 Proposition 4.4 (Use 2.4)
</td>
<td>
V2015 p499 Proposition 4.6 (Use 2.6)
</td>
</tr>
<tr class="odd">
<td>
survAFT exp
</td>
<td>
V2015 p494 Proposition 4.1 (Use 2.4)
</td>
<td>
V2015 p495 Proposition 4.3 (Use 2.6)
</td>
</tr>
<tr class="even">
<td>
survAFT weibull
</td>
<td>
V2015 p494 Proposition 4.1 (Use 2.4)
</td>
<td>
V2015 p495 Proposition 4.3 (Use 2.6)
</td>
</tr>
</tbody>
</table>
<p>Note the loglinear outcome model means log link with binomial error.</p>
</div>
<div id="standard-error-formulas" class="section level2">
<h2 class="hasAnchor">
<a href="#standard-error-formulas" class="anchor"></a>Standard error formulas</h2>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 39%">
<col style="width: 39%">
</colgroup>
<thead><tr class="header">
<th>
yreg \ mreg
</th>
<th>
linear
</th>
<th>
logistic
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
linear
</td>
<td>
V2015 p466 Proposition 2.3
</td>
<td>
V2015 p471 Proposition 2.5
</td>
</tr>
<tr class="even">
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr class="odd">
<td>
logistic
</td>
<td>
V2015 p468 Proposition 2.4
</td>
<td>
V2015 p473 Proposition 2.6
</td>
</tr>
<tr class="even">
<td>
loglinear
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="odd">
<td>
poisson
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="even">
<td>
negbin
</td>
<td>
VV2013A p8 Use Proposition 2.4
</td>
<td>
VV2013A p8 Use Proposition 2.6
</td>
</tr>
<tr class="odd">
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr class="even">
<td>
survCox
</td>
<td>
V2015 p496 Use Proposition 2.4
</td>
<td>
V2015 p499 Use Proposition 2.6
</td>
</tr>
<tr class="odd">
<td>
survAFT exp
</td>
<td>
V2015 p494 Use Proposition 2.4
</td>
<td>
V2015 p495 Use Proposition 2.6
</td>
</tr>
<tr class="even">
<td>
survAFT weibull
</td>
<td>
V2015 p494 Use Proposition 2.4
</td>
<td>
V2015 p495 Use Proposition 2.6
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="design" class="section level1">
<h1 class="hasAnchor">
<a href="#design" class="anchor"></a>Design</h1>
<p>The software design is outlined here for those who may be interested.</p>
<ul>
<li>Call structure
<ul>
<li>regmedint UI function
<ul>
<li>new_regmedint internal constructor
<ul>
<li>fit_mreg</li>
<li>fit_yreg</li>
<li>calc_myreg calls a specialized worker function, which return two functions, one for point estimates and the other for standard error estimate.
<ul>
<li>calc_myreg_mreg_linear_yreg_linear</li>
<li>calc_myreg_mreg_linear_yreg_logistic</li>
<li>calc_myreg_mreg_logistic_yreg_linear</li>
<li>calc_myreg_mreg_logistic_yreg_logistic</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>regmedint object structure
<ul>
<li>mreg_fit mediator regression model object as is</li>
<li>yreg_fit outcome regression model object as is</li>
<li>myreg_funs list
<ul>
<li>est_fun: (a0,a1,m_cde,c_cond) → (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>se_fun: (a0,a1,m_cde,c_cond) → se for (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>args preserves arguments given to the UI</li>
</ul>
</li>
</ul>
</li>
<li>User methods for the regmedint object
<ul>
<li>print.regmedint: prints coefficients for mreg, yreg, and mediation analysis</li>
<li>summary.regmedint: regmedint → summary_regmedint
<ul>
<li>print.summary_regmedint: prints summary objects for mreg, yreg, and mediation analysis</li>
<li>coef.summary_regmedint:</li>
</ul>
</li>
<li>coef.regmedint: regmedint → vector (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>vcov.regmedint: regmedint → matrix (cde,pnde,tnie,tnde,pnie,te,pm). Off-diagonals are NA.</li>
<li>confint.regmedint: regmedint → matrix of (lower,upper)</li>
</ul>
</li>
</ul>
</div>
<div id="similar-or-related-projects-for-counterfactual-causal-mediation-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#similar-or-related-projects-for-counterfactual-causal-mediation-analysis" class="anchor"></a>Similar or related projects for counterfactual causal mediation analysis</h1>
<div id="r" class="section level2">
<h2 class="hasAnchor">
<a href="#r" class="anchor"></a>R</h2>
<ul>
<li>mediation (simulation-based): <a href="https://CRAN.R-project.org/package=mediation" class="uri">https://CRAN.R-project.org/package=mediation</a>
</li>
<li>medflex (natural effect model): <a href="https://CRAN.R-project.org/package=medflex" class="uri">https://CRAN.R-project.org/package=medflex</a>
</li>
<li>intmed (interventional analogue): <a href="https://CRAN.R-project.org/package=intmed" class="uri">https://CRAN.R-project.org/package=intmed</a>
</li>
<li>mediator (regression-based): <a href="https:/github.com/GerkeLab/mediator" class="uri">https:/github.com/GerkeLab/mediator</a>
</li>
<li>causalMediation (regression-based): <a href="https:/github.com/harvard-P01/causalMediation" class="uri">https:/github.com/harvard-P01/causalMediation</a>
</li>
</ul>
</div>
<div id="other-statistical-environment" class="section level2">
<h2 class="hasAnchor">
<a href="#other-statistical-environment" class="anchor"></a>Other statistical environment</h2>
<ul>
<li>SAS macro (original regression-based) <a href="https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/" class="uri">https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/</a>
</li>
<li>SAS PROC CAUSALMED (regression-based) <a href="https://support.sas.com/rnd/app/stat/procedures/causalmed.html" class="uri">https://support.sas.com/rnd/app/stat/procedures/causalmed.html</a>
</li>
</ul>
</div>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<ul>
<li>V2015: VanderWeele (2015) Explanation in Causal Inference.</li>
<li>VV2013: Valeri &amp; VanderWeele (2013) Psych Method. 18:137.</li>
<li>VV2015: Valeri &amp; VanderWeele (2015) Epidemiology. 26:e23.</li>
<li>Z2004: Zou (2004) Am J Epidemiol 159:702.</li>
</ul>
</div>
</table>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kazuki Yoshida <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-2030-3549" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/kaz-yos/regmedint"><img src="https://travis-ci.org/kaz-yos/regmedint.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="http://www.r-pkg.org/pkg/regmedint"><img src="http://www.r-pkg.org/badges/version/regmedint"></a></li>
<li><a href="http://www.r-pkg.org/pkg/regmedint"><img src="http://cranlogs.r-pkg.org/badges/regmedint" alt="CRAN RStudio mirror downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Kazuki Yoshida.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
