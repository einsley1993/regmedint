<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Regression-Based Causal Mediation Analysis • regmedint</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Regression-Based Causal Mediation Analysis">
<meta property="og:description" content="R re-implementation of the SAS macro developped by Valeri and VanderWeele.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">regmedint</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="regmedint-developmental-repo" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#regmedint-developmental-repo" class="anchor"></a>regmedint (developmental repo) <img src="reference/figures/hex.png" align="right" height="140">
</h1></div>

<p>This is an R reimplementation of the regression-based causal mediation analysis methods as implemented in the SAS macro by Valeri and VanderWeele (2013 and 2015). The original is found at Dr. VanderWeele’s <a href="https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/">Tools and Tutorials</a>.</p>
<p>This package is meant to be an educational tool. Thanks to R’s expressibility, the code is likely easier to read than SAS IML. Thus, the correspondence between the formulas presented in the Appendix of Explanation in Causal Inference (VanderWeele 2015) and the code should be easier to grasp.</p>
</div>
<div id="example" class="section level1">
<h1 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h1>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co">## install.packages("devtools") # If you do not have it.</span>
<span class="co">## devtools::install_github("kaz-yos/regmedint") # If you have not installed it, yet.</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">regmedint</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)

<span class="co">## FIXME: Find a meaningful data example within R.</span>
<span class="no">regmedint_obj</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/regmedint.html">regmedint</a></span>(<span class="no">data</span>,
                           <span class="co">##</span>
                           <span class="no">yvar</span>,
                           <span class="no">avar</span>,
                           <span class="no">mvar</span>,
                           <span class="no">cvar</span>,
                           <span class="co">##</span>
                           <span class="no">a0</span>,
                           <span class="no">a1</span>,
                           <span class="no">m_cde</span>,
                           <span class="no">c_cond</span>,
                           <span class="co">##</span>
                           <span class="no">mreg</span>,
                           <span class="no">yreg</span>,
                           <span class="co">##</span>
                           <span class="kw">interaction</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
                           <span class="kw">casecontrol</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
                           <span class="kw">eventvar</span> <span class="kw">=</span> <span class="kw">NULL</span>)

<span class="co">## Implicit printing prints mreg, yreg, and mediation analysis point estimates.</span>
<span class="no">regmedint_obj</span>
<span class="co">## A fuller result is obtained.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">regmedint_obj</span>)
<span class="co">## Add exponentiated results.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">regmedint_obj</span>, <span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">## The estimates can be re-evaluated without model refitting at a different mvar value.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">regmedint_obj</span>, <span class="kw">m_cde</span> <span class="kw">=</span> )
<span class="co">## The estimates can be re-evaluated without model refitting at a different c_cond value.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">regmedint_obj</span>, <span class="kw">c_cond</span> <span class="kw">=</span> )</pre></div>
</div>
<div id="implementation-status" class="section level1">
<h1 class="hasAnchor">
<a href="#implementation-status" class="anchor"></a>Implementation status</h1>
<p>This package is currently under development. The eAppendix for SAS macro for causal mediation analysis with survival data (Valeri &amp; VanderWeele 2015) describes the following grid of models.</p>
<table class="table">
<table class="table">
<thead><tr class="header">
<th align="left">yreg  mreg</th>
<th align="center">linear</th>
<th align="center">logistic</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">linear</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="left">logistic</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="left">loglinear</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="left">poisson</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="left">negbin</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="left">survCox</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="left">survAFT exp</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="left">survAFT weibull</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
</tbody>
</table>
<p>The current implementation status: 0. None (left blank) 1. SAS reference results created 2. R implementation ongoing 3. R implementation complete</p>

<div id="formulas" class="section level1">
<h1 class="hasAnchor">
<a href="#formulas" class="anchor"></a>Formulas</h1>
<p>The point estimate and standard error formulas (multivariate delta method) were taken from the following references.</p>
<ul>
<li>V2015: VanderWeele (2015) Explanation in Causal Inference.</li>
<li>VV2013A: Valeri &amp; VanderWeele (2013) Appendix</li>
<li>VV2015A: Valeri &amp; VanderWeele (2015) Appendix</li>
</ul>
<p>As seen below, there are only four patterns.</p>
<div id="effect-formulas" class="section level2">
<h2 class="hasAnchor">
<a href="#effect-formulas" class="anchor"></a>Effect formulas</h2>
<table class="table">
<colgroup>
<col width="17%">
<col width="41%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>yreg  mreg</th>
<th>linear</th>
<th>logistic</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>linear</td>
<td>V2015 p466 Proposition 2.3</td>
<td>V2015 p471 Proposition 2.5</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>logistic</td>
<td>V2015 p468 Proposition 2.4</td>
<td>V2015 p473 Proposition 2.6</td>
</tr>
<tr class="even">
<td>loglinear</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="odd">
<td>poisson</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="even">
<td>negbin</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>survCox</td>
<td>V2015 p496 Proposition 4.4 (Use 2.4)</td>
<td>V2015 p499 Proposition 4.6 (Use 2.6)</td>
</tr>
<tr class="odd">
<td>survAFT exp</td>
<td>V2015 p494 Proposition 4.1 (Use 2.4)</td>
<td>V2015 p495 Proposition 4.3 (Use 2.6)</td>
</tr>
<tr class="even">
<td>survAFT weibull</td>
<td>V2015 p494 Proposition 4.1 (Use 2.4)</td>
<td>V2015 p495 Proposition 4.3 (Use 2.6)</td>
</tr>
</tbody>
</table>
<p>Note the loglinear outcome model means log link with binomial error.</p>
</div>
<div id="standard-error-formulas" class="section level2">
<h2 class="hasAnchor">
<a href="#standard-error-formulas" class="anchor"></a>Standard error formulas</h2>
<table class="table">
<colgroup>
<col width="20%">
<col width="40%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>yreg  mreg</th>
<th>linear</th>
<th>logistic</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>linear</td>
<td>V2015 p466 Proposition 2.3</td>
<td>V2015 p471 Proposition 2.5</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>logistic</td>
<td>V2015 p468 Proposition 2.4</td>
<td>V2015 p473 Proposition 2.6</td>
</tr>
<tr class="even">
<td>loglinear</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="odd">
<td>poisson</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="even">
<td>negbin</td>
<td>VV2013A p8 Use Proposition 2.4</td>
<td>VV2013A p8 Use Proposition 2.6</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>survCox</td>
<td>V2015 p496 Use Proposition 2.4</td>
<td>V2015 p499 Use Proposition 2.6</td>
</tr>
<tr class="odd">
<td>survAFT exp</td>
<td>V2015 p494 Use Proposition 2.4</td>
<td>V2015 p495 Use Proposition 2.6</td>
</tr>
<tr class="even">
<td>survAFT weibull</td>
<td>V2015 p494 Use Proposition 2.4</td>
<td>V2015 p495 Use Proposition 2.6</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="design" class="section level1">
<h1 class="hasAnchor">
<a href="#design" class="anchor"></a>Design</h1>
<p>The software design is outlined here for those who may be interested.</p>
<ul>
<li>Call structure
<ul>
<li>regmedint UI function
<ul>
<li>new_regmedint internal constructor
<ul>
<li>fit_mreg</li>
<li>fit_yreg</li>
<li>calc_myreg calls a specialized worker function, which return two functions, one for point estimates and the other for standard error estimate.
<ul>
<li>calc_myreg_mreg_linear_yreg_linear</li>
<li>calc_myreg_mreg_linear_yreg_logistic</li>
<li>calc_myreg_mreg_logistic_yreg_linear</li>
<li>calc_myreg_mreg_logistic_yreg_logistic</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>regmedint object structure
<ul>
<li>mreg_fit mediator regression model object as is</li>
<li>yreg_fit outcome regression model object as is</li>
<li>myreg_funs list
<ul>
<li>est_fun: (a0,a1,m_cde,c_cond) → (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>se_fun: (a0,a1,m_cde,c_cond) → se for (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>args preserves arguments given to the UI</li>
</ul>
</li>
</ul>
</li>
<li>User methods for the regmedint object
<ul>
<li>print.regmedint: prints coefficients for mreg, yreg, and mediation analysis</li>
<li>summary.regmedint: regmedint → summary_regmedint
<ul>
<li>print.summary_regmedint: prints summary objects for mreg, yreg, and mediation analysis</li>
<li>coef.summary_regmedint:</li>
</ul>
</li>
<li>coef.regmedint: regmedint → vector (cde,pnde,tnie,tnde,pnie,te,pm)</li>
<li>vcov.regmedint: regmedint → matrix (cde,pnde,tnie,tnde,pnie,te,pm). Off-diagonals are NA.</li>
<li>confint.regmedint: regmedint → matrix of (lower,upper)</li>
</ul>
</li>
</ul>
</div>
<div id="similar-or-related-r-projects" class="section level1">
<h1 class="hasAnchor">
<a href="#similar-or-related-r-projects" class="anchor"></a>Similar or related R projects</h1>
<ul>
<li>mediation: <a href="https:/cran.r-project.org/web/packages/mediation/index.html/" class="uri">https:/cran.r-project.org/web/packages/mediation/index.html/</a>
</li>
<li>medflex: <a href="https:/cran.r-project.org/web/packages/medflex/index.html/" class="uri">https:/cran.r-project.org/web/packages/medflex/index.html/</a>
</li>
<li>intmed: <a href="https:/cran.r-project.org/web/packages/intmed/index.html/" class="uri">https:/cran.r-project.org/web/packages/intmed/index.html/</a>
</li>
<li>mediator: <a href="https:/github.com/GerkeLab/mediator/" class="uri">https:/github.com/GerkeLab/mediator/</a>
</li>
<li>causalMediation: <a href="https:/github.com/harvard-P01/causalMediation" class="uri">https:/github.com/harvard-P01/causalMediation</a>
</li>
</ul>
</div>
</table>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kazuki Yoshida <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-2030-3549" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/kaz-yos/regmedint"><img src="https://travis-ci.org/kaz-yos/regmedint.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="http://www.r-pkg.org/pkg/regmedint"><img src="http://www.r-pkg.org/badges/version/regmedint"></a></li>
<li><a href="http://www.r-pkg.org/pkg/regmedint"><img src="http://cranlogs.r-pkg.org/badges/regmedint" alt="CRAN RStudio mirror downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Kazuki Yoshida.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
